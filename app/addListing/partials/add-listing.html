
<div>HELLO, ADDLISTING</div>

<div ng-controller="AddListingCtrl as filter">
    <form name='myForm' ng-submit="submitListing()">

        // some of these will be set
        <div>
            <label>Item Description</label>
            <input type="text" ng-model="item.desc" placeholder="description">
        </div>
        <div>
            <label for="Retail Price">Retail Price</label>
            <input type="text" ng-model="item.price" placeholder="original retail">
        </div>
        <div>
            <label for="Image">Image</label>
            <input type="file" ng-model="item.image">
        </div>
        <div>
            <label for="Category">Category</label>
            <select ng-model="item.categoryId" ng-change="getSubCategories()">
                <option ng-repeat="cat in categories" value="{{cat.value}}" ng-selected='cat.isSelected'>{{cat.label}}</option>
            </select>
        </div>
        <div>
            <label>SubCategory</label>
            <select ng-model="item.subCategoryId" ng-change="getAttributes()">
            <option ng-repeat="cat in subCategories" value="{{cat.value}}" ng-selected='cat.isSelected'>{{cat.label}}</option>        
            </select>
        </div>
        <div>Attributes</div>
        <div ng-repeat="field in attributeModel" ng-form='subForm'>
        <div class="input-field inline" ng-if='field.data_type == "text"'>
            <label>{{field.label}}</label>
            <input type='text' ng-model='field.model' placeholder='{{field.label}}' name='myText'/>
            <span class='required' ng-show="subForm.myText.$error.required">*</span>
        </div>
        <div class="input-field inline" ng-if='field.data_type == "email"'>
            <input type='email' ng-model='field.model' placeholder='{{field.label}}' name='myEmail'/>
            <span class='required' ng-show="subForm.myEmail.$error.required">*</span>
        </div>
        <div ng-if='field.data_type === "file"'>
        <label>{{field.label}}</label>
        <input type="file" ng-model='field.model' placeholder='{{field.label}}' name="myImage"/>
        </div>
        <div ng-if='field.data_type === "select"'>
        <label>{{field.label}}</label>
            <select ng-model='field.model'>
            <option ng-repeat='m in field.viewModel' value="{{m.value}}" ng-selected='m.isSelected'>{{m.label}}</option>
            </select>
        </div>
    </div>
    
    <input type='submit' value='submit form' ng-disabled='myForm.$invalid'/>
    
    </form>
        
    <!-- <div ng-show='submitted' class='form-result'> -->
        <div>{{item.description}}</div>
        <div ng-repeat='model in listingModel'>
        {{model.name}}: {{model.model}}
        </div>
    <!-- </div> -->
</div>
