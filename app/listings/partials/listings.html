<h1 ng-init="init()" ng-clone>listings</h1>
{{currentUser}}
<svg class="progress-circle indefinite" width="100" height="100">
    <g transform="rotate(-90,50,50)">
        <circle class="bg" r="40" cx="50" cy="50" fill="none"></circle>
        <circle class="progress" r="40" cx="50" cy="50" fill="none"></circle>
    </g>
</svg>
<!-- accordian section -->
<div ng-init="accordion=1">
        <h6 class="accordion" ng-class="{active:accordion==1}">
            <a href ng-click="accordion = 1">Section 1</a>
        </h6>
        <p class="accordion-content" ng-show="accordion==1">Lorem Ipsum is that it has a more-or-less normal distribution of letters, as opposed to using</p>
            
        <h6 class="accordion" ng-class="{active:accordion==2}">
            <a href ng-click="accordion = 2">Section 2</a>
        </h6>
        <p class="accordion-content" ng-show="accordion==2">It is a long established fact that a reader will be distracted by the readable content of a page when looking at its layout. The point of using Lorem Ipsum is that it has a more-or-less normal distribution of letters, as opposed to using</p>
            
        <h6 class="accordion" ng-class="{active:accordion==3}">
            <a href ng-click="accordion = 3">Section 3</a>
        </h6>
        <p class="accordion-content" ng-show="accordion==3">There are many variations of passages of Lorem Ipsum available, but the majority have suffered alteration in some form</p>
    </div>
<!-- end of accordian -->
<div class="listings__main">
    
    
    
    <div class="listings__filter-wrapper">
        <h1>FILTER</h1>
        <form name="filterForm">
            <div>
                <label for="Category">Category and Sub-Category</label>
                <select ng-model="selectedCategory" ng-change="getSubCategories()">
                    <option value="0">No Category Filter</option>
                    <option value="{{cat.externalId}}" ng-repeat="cat in categories">{{cat.label}}</option>
                </select>
                <!-- <select ng-model="selectedSubCategory" ng-change="getAttributesFilter()">
                    <option ng-repeat="cat in subCategories">{{cat.label}}</option>
                </select> -->
            </div>
            <p>Search</p>
            <input type="text" ng-keypress="finder($event)" ng-model="filterSearchString" placeholder="Search">
            <p>Group Filters</p>
            <div ng-repeat="group in filterGroups track by $index">
                <div>
                    <input type="checkbox" class="filled-in" checklist-model="inviteGroups" checklist-value="group"> {{group.name}}
                </div>
            </div>
            <button type="button" ng-click="filterListingsBasedOnGroups()">Filter By Groups</button>
            <div id="map"></div>
            <button type="button" ng-click="filterListings()">FILTER</button>
            <button type="button" ng-click="init()">CLEAR SEARCH</button>
            <button type="button" ng-click="checkMapBounds()">INBOUNDS?</button>
        </form>

    </div>
    <div class="listings__listings-global-wrapper">
        <div ng-repeat="item in listings | filter: filterSearchString | categoryMatch: filterSearchString | filter: {requestedDate: 0}:true | orderBy: 'timestamp':true"
            ng-cloak>
            <div class="card" style="width: 20rem">
                <img class="listing__image card-img-top" src="{{item.image}}" />

                <div class="card-body">
                    <h3 class="listing__label">{{item.label}}</h3>
                    <span>{{item.price}}</span>
                    <div class="listing__desc">{{item.desc}}</div>
                    <div>
                        <span>{{item.category.label}} > {{item.subCategory.label}}</span>
                    </div>

                    <div ng-repeat="attr in item.attributes">
                        {{attr.label}}: {{attr.value}}
                    </div>
                    <div class="listing__tag-container">
                        <span ng-repeat="tag in item.tags" class="listing__tag chip">
                            {{tag}}
                        </span>
                    </div>
                    <div>
                        <span>{{item.user.city}}</span>
                    </div>

                    <button type="button" class="btn btn-primary" id="{{item.id}}" ng-click="purchase($event)">I want this one</button>

                </div>
            </div>

        </div>
    </div>
</div>
<!-- listings main end -->